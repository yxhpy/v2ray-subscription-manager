---
description: 
globs: 
alwaysApply: false
---
# å‘å¸ƒå·¥ä½œæµè§„åˆ™

## é¡¹ç›®ç»“æ„
- ä¸»ç¨‹åºå…¥å£: [main.go](mdc:main.go)
- æ„å»ºè„šæœ¬: [build.sh](mdc:build.sh)
- **è‡ªåŠ¨åŒ–å‘å¸ƒè„šæœ¬**: [release.sh](mdc:release.sh) (Linux/macOS)
- **Windowså‘å¸ƒè„šæœ¬**: [release.bat](mdc:release.bat) (Windows)
- READMEæ–‡æ¡£: [README.md](mdc:README.md)
- å‘å¸ƒè¯´æ˜: [RELEASE_NOTES.md](mdc:RELEASE_NOTES.md)
- Goæ¨¡å—æ–‡ä»¶: [go.mod](mdc:go.mod)

## å‘å¸ƒæµç¨‹

### ğŸš€ ä¸€é”®è‡ªåŠ¨åŒ–å‘å¸ƒ

#### ä½¿ç”¨è‡ªåŠ¨åŒ–å‘å¸ƒè„šæœ¬

**Linux/macOS - [release.sh](mdc:release.sh)**
```bash
# åŸºæœ¬ç”¨æ³•
./release.sh <version> [commit_message]

# ç¤ºä¾‹
./release.sh v1.3.0 "æ·»åŠ æ–°åŠŸèƒ½å’Œä¿®å¤Bug"
./release.sh v1.2.1 "ä¿®å¤Windowså…¼å®¹æ€§é—®é¢˜"
```

**Windows - [release.bat](mdc:release.bat)**
```cmd
# åŸºæœ¬ç”¨æ³•
release.bat <version> [commit_message]

# ç¤ºä¾‹
release.bat v1.3.0 "æ·»åŠ æ–°åŠŸèƒ½å’Œä¿®å¤Bug"
release.bat v1.2.1 "ä¿®å¤Windowså…¼å®¹æ€§é—®é¢˜"
```

#### è‡ªåŠ¨åŒ–è„šæœ¬åŠŸèƒ½
- âœ… **ç‰ˆæœ¬éªŒè¯**: è‡ªåŠ¨éªŒè¯ç‰ˆæœ¬å·æ ¼å¼ (vX.Y.Z)
- âœ… **å·¥ä½œç›®å½•æ£€æŸ¥**: æ£€æŸ¥GitçŠ¶æ€ï¼Œè‡ªåŠ¨å¤„ç†æœªæäº¤æ›´æ”¹
- âœ… **è·¨å¹³å°ç¼–è¯‘**: è‡ªåŠ¨ç¼–è¯‘6ä¸ªå¹³å°ç‰ˆæœ¬ (Windows/Linux/macOS Ã— amd64/arm64)
- âœ… **ä¼˜åŒ–æ„å»º**: ä½¿ç”¨ `-ldflags="-s -w"` ä¼˜åŒ–äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°
- âœ… **è‡ªåŠ¨æ‰“åŒ…**: åˆ›å»ºå„å¹³å°zipå‹ç¼©åŒ…å’Œå…¨å¹³å°tar.gzåŒ…
- âœ… **æ–‡ä»¶æ ¡éªŒ**: ç”ŸæˆSHA256æ ¡éªŒå’Œæ–‡ä»¶
- âœ… **Gitæ“ä½œ**: è‡ªåŠ¨æäº¤ã€æ¨é€ä»£ç å’Œåˆ›å»ºæ ‡ç­¾
- âœ… **Releaseè¯´æ˜**: è‡ªåŠ¨ç”ŸæˆGitHub Releaseæè¿°æ–‡ä»¶
- âœ… **å½©è‰²è¾“å‡º**: ç¾è§‚çš„è¿›åº¦æ˜¾ç¤ºå’ŒçŠ¶æ€åé¦ˆ

### ğŸ¤– ä¼ ç»Ÿåˆ†æ­¥æ“ä½œï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰

#### 1. æ›´æ–°æ–‡æ¡£ï¼ˆAIè‡ªåŠ¨å®Œæˆï¼‰
- æ›´æ–° [README.md](mdc:README.md) åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨
- æ›´æ–°å®‰è£…è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹
- æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯
- æ·»åŠ æœ€æ–°ä¿®å¤çš„é—®é¢˜è¯´æ˜

#### 2. æ›´æ–°å‘å¸ƒè¯´æ˜ï¼ˆAIè‡ªåŠ¨å®Œæˆï¼‰
- åœ¨ [RELEASE_NOTES.md](mdc:RELEASE_NOTES.md) ä¸­æ·»åŠ æ–°ç‰ˆæœ¬ä¿¡æ¯
- åŒ…å«ä¿®å¤çš„é—®é¢˜åˆ—è¡¨
- åŒ…å«æ–°å¢åŠŸèƒ½
- åŒ…å«æ€§èƒ½æ”¹è¿›
- åŒ…å«å·²çŸ¥é—®é¢˜

#### 3. æ‰‹åŠ¨ç¼–è¯‘å’Œå‘å¸ƒ
```bash
# æ‰‹åŠ¨ç¼–è¯‘å„å¹³å°ç‰ˆæœ¬
GOOS=windows GOARCH=amd64 go build -ldflags="-s -w" -o bin/v2ray-subscription-manager-windows-amd64.exe .
GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/v2ray-subscription-manager-linux-amd64 .
GOOS=darwin GOARCH=amd64 go build -ldflags="-s -w" -o bin/v2ray-subscription-manager-darwin-amd64 .
# ... å…¶ä»–å¹³å°

# æ‰‹åŠ¨åˆ›å»ºå‹ç¼©åŒ…
cd bin
zip v2ray-subscription-manager-v1.3.0-windows-amd64.zip v2ray-subscription-manager-windows-amd64.exe
# ... å…¶ä»–å‹ç¼©åŒ…

# æ‰‹åŠ¨Gitæ“ä½œ
git add .
git commit -m "release: å‘å¸ƒv1.3.0ç‰ˆæœ¬"
git push origin main
git tag -a v1.3.0 -m "Release v1.3.0"
git push origin v1.3.0
```

### ğŸ‘¤ æ‰‹åŠ¨æ“ä½œ

#### 6. åˆ›å»ºGitHub Releaseï¼ˆç”¨æˆ·æ‰‹åŠ¨å®Œæˆï¼‰
ç”¨æˆ·éœ€è¦æ‰‹åŠ¨åœ¨GitHubä¸Šåˆ›å»ºReleaseï¼š

1. **è®¿é—®GitHub Releaseé¡µé¢**
   - å‰å¾€é¡¹ç›®çš„GitHubé¡µé¢
   - ç‚¹å‡»"Releases"æ ‡ç­¾
   - ç‚¹å‡»"Create a new release"

2. **å¡«å†™Releaseä¿¡æ¯**
   - Tag version: `v1.2.0`ï¼ˆä½¿ç”¨å·²åˆ›å»ºçš„æ ‡ç­¾ï¼‰
   - Release title: `v1.2.0 - Windowså…¼å®¹æ€§é‡å¤§ä¿®å¤å’Œæ™ºèƒ½è§£ç ç³»ç»Ÿ`
   - å¤åˆ¶AIç”Ÿæˆçš„Releaseæè¿°å†…å®¹

3. **ä¸Šä¼ ç¼–è¯‘æ–‡ä»¶**
   - ä¸Šä¼  `bin/` ç›®å½•ä¸‹çš„æ‰€æœ‰ç¼–è¯‘æ–‡ä»¶
   - åˆ›å»ºå‹ç¼©åŒ…å¹¶ä¸Šä¼ ï¼š
   ```bash
   cd bin
   zip v2ray-subscription-manager-v1.2.0-windows-amd64.zip v2ray-subscription-manager-windows-amd64.exe
   zip v2ray-subscription-manager-v1.2.0-linux-amd64.zip v2ray-subscription-manager-linux-amd64
   zip v2ray-subscription-manager-v1.2.0-darwin-amd64.zip v2ray-subscription-manager-darwin-amd64
   # ... å…¶ä»–å¹³å°
   ```

4. **å‘å¸ƒRelease**
   - æ£€æŸ¥æ‰€æœ‰ä¿¡æ¯æ— è¯¯
   - ç‚¹å‡»"Publish release"

#### 7. AIç”Ÿæˆçš„Releaseå†…å®¹æ¨¡æ¿
AIä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹å†…å®¹ä¾›ç”¨æˆ·ä½¿ç”¨ï¼š

- **Releaseæ ‡é¢˜æ ¼å¼**: `v1.2.0 - Windowså…¼å®¹æ€§é‡å¤§ä¿®å¤å’Œæ™ºèƒ½è§£ç ç³»ç»Ÿ`
- **Releaseæè¿°**: åŒ…å«ä¸»è¦ä¿®å¤ã€ä¸‹è½½æ–‡ä»¶è¡¨æ ¼ã€å‡çº§è¯´æ˜ã€ä½¿ç”¨ç¤ºä¾‹
- **æäº¤ä¿¡æ¯**: è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯ï¼Œè¯¦ç»†è¯´æ˜æ‰€æœ‰ä¿®å¤å†…å®¹
- **æ ‡ç­¾ä¿¡æ¯**: ç®€æ´çš„ç‰ˆæœ¬æ ‡ç­¾æè¿°
- **ç¼–è¯‘å‘½ä»¤**: æ‰€æœ‰å¹³å°çš„ç¼–è¯‘å‘½ä»¤å’Œå‹ç¼©åŒ…åˆ›å»ºå‘½ä»¤

## ç‰ˆæœ¬å·è§„åˆ™
- ä¸»ç‰ˆæœ¬å·ï¼šé‡å¤§æ¶æ„å˜æ›´æˆ–ä¸å…¼å®¹æ›´æ–°
- æ¬¡ç‰ˆæœ¬å·ï¼šæ–°åŠŸèƒ½æ·»åŠ 
- ä¿®è®¢ç‰ˆæœ¬å·ï¼šBugä¿®å¤å’Œå°æ”¹è¿›

## æäº¤ä¿¡æ¯è§„èŒƒ
- `feat:` æ–°åŠŸèƒ½
- `fix:` Bugä¿®å¤
- `docs:` æ–‡æ¡£æ›´æ–°
- `style:` ä»£ç æ ¼å¼åŒ–
- `refactor:` ä»£ç é‡æ„
- `test:` æµ‹è¯•ç›¸å…³
- `chore:` æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

## å‘å¸ƒæ£€æŸ¥æ¸…å•

### ğŸš€ ä¸€é”®å‘å¸ƒæ£€æŸ¥æ¸…å•ï¼ˆæ¨èï¼‰

**Linux/macOS** - ä½¿ç”¨ [release.sh](mdc:release.sh) è„šæœ¬ï¼š
- [ ] è¿è¡Œ `./release.sh v1.x.x "å‘å¸ƒè¯´æ˜"`
- [ ] è„šæœ¬è‡ªåŠ¨å®Œæˆæ‰€æœ‰ç¼–è¯‘å’ŒGitæ“ä½œ
- [ ] æ£€æŸ¥ç”Ÿæˆçš„ `release_notes_v1.x.x.md` æ–‡ä»¶
- [ ] æ‰‹åŠ¨åœ¨GitHubä¸Šåˆ›å»ºReleaseå¹¶ä¸Šä¼ æ–‡ä»¶

**Windows** - ä½¿ç”¨ [release.bat](mdc:release.bat) è„šæœ¬ï¼š
- [ ] è¿è¡Œ `release.bat v1.x.x "å‘å¸ƒè¯´æ˜"`
- [ ] è„šæœ¬è‡ªåŠ¨å®Œæˆæ‰€æœ‰ç¼–è¯‘å’ŒGitæ“ä½œ
- [ ] æ£€æŸ¥ç”Ÿæˆçš„ `release_notes_v1.x.x.md` æ–‡ä»¶
- [ ] æ‰‹åŠ¨åœ¨GitHubä¸Šåˆ›å»ºReleaseå¹¶ä¸Šä¼ æ–‡ä»¶

### ğŸ¤– ä¼ ç»Ÿè‡ªåŠ¨åŒ–æ£€æŸ¥æ¸…å•ï¼ˆå¤‡ç”¨ï¼‰
- [ ] æ‰€æœ‰ä»£ç ä¿®å¤å·²å®Œæˆ
- [ ] [README.md](mdc:README.md) å·²è‡ªåŠ¨æ›´æ–°
- [ ] [RELEASE_NOTES.md](mdc:RELEASE_NOTES.md) å·²è‡ªåŠ¨æ›´æ–°
- [ ] ä»£ç å·²è‡ªåŠ¨æäº¤åˆ°mainåˆ†æ”¯
- [ ] ç‰ˆæœ¬æ ‡ç­¾å·²è‡ªåŠ¨åˆ›å»ºå’Œæ¨é€
- [ ] æ‰€æœ‰å¹³å°äºŒè¿›åˆ¶æ–‡ä»¶å·²è‡ªåŠ¨ç¼–è¯‘
- [ ] Releaseå†…å®¹å·²ç”Ÿæˆå¹¶æä¾›ç»™ç”¨æˆ·

### ğŸ‘¤ æ‰‹åŠ¨æ£€æŸ¥æ¸…å•
- [ ] ç”¨æˆ·å·²åœ¨GitHubä¸Šåˆ›å»ºRelease
- [ ] Releaseæ ‡é¢˜å’Œæè¿°å·²æ­£ç¡®å¡«å†™
- [ ] æ‰€æœ‰ç¼–è¯‘æ–‡ä»¶å·²ä¸Šä¼ åˆ°Release
- [ ] Releaseå·²æˆåŠŸå‘å¸ƒ
- [ ] ç”¨æˆ·å·²éªŒè¯ä¸‹è½½é“¾æ¥å¯ç”¨

### ğŸ“‹ å‘å¸ƒæµç¨‹å¯¹æ¯”

#### ğŸš€ ä¸€é”®è‡ªåŠ¨åŒ–æµç¨‹ï¼ˆæ¨èï¼‰
1. **è¿è¡Œè„šæœ¬**: `./release.sh v1.x.x "å‘å¸ƒè¯´æ˜"`
2. **æ‰‹åŠ¨æ“ä½œ**: GitHub Releaseåˆ›å»º â†’ æ–‡ä»¶ä¸Šä¼  â†’ å‘å¸ƒç¡®è®¤

#### ğŸ¤– ä¼ ç»Ÿåˆ†æ­¥æµç¨‹
1. **AIè‡ªåŠ¨æ‰§è¡Œ**: ä»£ç ä¿®å¤ â†’ æ–‡æ¡£æ›´æ–° â†’ æäº¤æ¨é€ â†’ æ ‡ç­¾åˆ›å»º â†’ ç¼–è¯‘æ„å»º
2. **ç”¨æˆ·æ‰‹åŠ¨æ‰§è¡Œ**: GitHub Releaseåˆ›å»º â†’ æ–‡ä»¶ä¸Šä¼  â†’ å‘å¸ƒç¡®è®¤
